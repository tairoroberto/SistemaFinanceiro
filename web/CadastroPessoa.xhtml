<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Cadastro Cliente/Fornecedor</title>

<h:outputStylesheet library="css" name="sistema.css"/>
<h:outputStylesheet library="css" name="consulta-lancamentos.css"/>

</h:head>
<h:body>
	<h1>Cadastro de Pessoa</h1>
	
	<h:form>
		<h:button value="Novo lancamento" outcome="CadastroLancamento"/>
		<h:button value="Consulta pessoas" outcome="ConsultaPessoa"/>

        <h:messages showDetail="false" showSummary="true" styleClass="form-messages"
                    errorClass="error" infoClass="info"/>
		
		<h:panelGrid columns="2" styleClass="form-grid"
			columnClasses="label,campo">
			
			<h:outputLabel value="Nome"/>
			<h:inputText size="40" label="Nome" value="#{cadastroPessoaBean.pessoa.nome}"
                    required="true"/>
			
			<h:outputLabel value="Tipo"/>
			<h:selectOneRadio value="#{cadastroPessoaBean.pessoa.tipo}"
                              label="Tipo" required="true" immediate="true"
                              valueChangeListener="#{cadastroPessoaBean.verificaTipo}"
                              onchange="submit()">
				<f:selectItems value="#{cadastroPessoaBean.tiposPessoas}"
                        var="tipoPessoa" itemValue="#{tipoPessoa}" itemLabel="#{tipoPessoa.descricaoTipo}"/>
			</h:selectOneRadio>

			<h:outputLabel value="E-mail" />
			<h:inputText size="40" label="E-mail" value="#{cadastroPessoaBean.pessoa.email}"
                    required="true">
                <f:validator validatorId="br.com.tairoroberto.EmailValidator"/>
            </h:inputText>
			
			<h:outputLabel value="Data de nascimento" rendered="#{cadastroPessoaBean.pessoa.tipo eq 'FISICA'}"/>
			<h:inputText size="12" label="Data de nascimento"
                         value="#{cadastroPessoaBean.pessoa.dataNascimento}"
                         rendered="#{cadastroPessoaBean.pessoa.tipo eq 'FISICA'}">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
            </h:inputText>
			
			<h:outputLabel value="Ramo de atividade" rendered="#{cadastroPessoaBean.pessoa.tipo eq 'JURIDICA'}"/>
			<h:selectOneMenu value="#{cadastroPessoaBean.pessoa.ramoAtividade}"
                    required="true" rendered="#{cadastroPessoaBean.pessoa.tipo eq 'JURIDICA'}">
				<f:selectItems value="#{cadastroPessoaBean.ramosAtividadeses}"
                        var="ramoAtividade" itemLabel="#{ramoAtividade.descricao}"/>
			</h:selectOneMenu>
			
			<h:outputLabel/>
			<h:commandButton value="Cadastrar" action="#{cadastroPessoaBean.cadastrar}"/>
		</h:panelGrid>
	</h:form>
</h:body>
</html>